{"ast":null,"code":"var _jsxFileName = \"/Users/andrewhellquist/Desktop/Cursor/my-bi-editor/frontend/src/components/CSVUploader.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CSVUploader({\n  selectedPID,\n  onVariablesAdded\n}) {\n  _s();\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const handleFileChange = e => {\n    const selectedFile = e.target.files[0];\n    if (selectedFile && selectedFile.type !== 'text/csv') {\n      setError('Please select a CSV file');\n      setFile(null);\n    } else {\n      setError('');\n      setFile(selectedFile);\n    }\n  };\n  const handleUpload = async e => {\n    e.preventDefault();\n    if (!(selectedPID !== null && selectedPID !== void 0 && selectedPID._id)) {\n      setError('Please select a PID first');\n      return;\n    }\n    if (!file) {\n      setError('Please select a file');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.post(`http://localhost:4000/variables/${selectedPID._id}/upload`, formData, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      if (onVariablesAdded) {\n        onVariablesAdded(response.data);\n      }\n\n      // Reset file input\n      setFile(null);\n      // Reset file input element\n      e.target.reset();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Error uploading variables');\n      console.error('Upload error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: '10px',\n      marginBottom: '20px'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleUpload,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '10px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".csv\",\n          onChange: handleFileChange,\n          style: {\n            width: '100%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'red',\n          marginBottom: '10px'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: !file || loading,\n        style: {\n          width: '100%',\n          padding: '8px',\n          backgroundColor: file ? '#4444ff' : '#cccccc',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: file ? 'pointer' : 'not-allowed'\n        },\n        children: loading ? 'Uploading...' : 'Upload CSV'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(CSVUploader, \"zemLLjpIXaK1pN1ujLb0pGj6wXM=\");\n_c = CSVUploader;\nexport default CSVUploader;\nvar _c;\n$RefreshReg$(_c, \"CSVUploader\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","CSVUploader","selectedPID","onVariablesAdded","_s","file","setFile","error","setError","loading","setLoading","handleFileChange","e","selectedFile","target","files","type","handleUpload","preventDefault","_id","formData","FormData","append","token","localStorage","getItem","response","post","headers","data","reset","err","_err$response","_err$response$data","message","console","style","marginTop","marginBottom","children","onSubmit","accept","onChange","width","fileName","_jsxFileName","lineNumber","columnNumber","color","disabled","padding","backgroundColor","border","borderRadius","cursor","_c","$RefreshReg$"],"sources":["/Users/andrewhellquist/Desktop/Cursor/my-bi-editor/frontend/src/components/CSVUploader.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\n\nfunction CSVUploader({ selectedPID, onVariablesAdded }) {\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleFileChange = (e) => {\n    const selectedFile = e.target.files[0];\n    if (selectedFile && selectedFile.type !== 'text/csv') {\n      setError('Please select a CSV file');\n      setFile(null);\n    } else {\n      setError('');\n      setFile(selectedFile);\n    }\n  };\n\n  const handleUpload = async (e) => {\n    e.preventDefault();\n    \n    if (!selectedPID?._id) {\n      setError('Please select a PID first');\n      return;\n    }\n\n    if (!file) {\n      setError('Please select a file');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.post(\n        `http://localhost:4000/variables/${selectedPID._id}/upload`,\n        formData,\n        {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'multipart/form-data'\n          }\n        }\n      );\n\n      if (onVariablesAdded) {\n        onVariablesAdded(response.data);\n      }\n      \n      // Reset file input\n      setFile(null);\n      // Reset file input element\n      e.target.reset();\n      \n    } catch (err) {\n      setError(err.response?.data?.message || 'Error uploading variables');\n      console.error('Upload error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ marginTop: '10px', marginBottom: '20px' }}>\n      <form onSubmit={handleUpload}>\n        <div style={{ marginBottom: '10px' }}>\n          <input\n            type=\"file\"\n            accept=\".csv\"\n            onChange={handleFileChange}\n            style={{ width: '100%' }}\n          />\n        </div>\n        {error && (\n          <div style={{ color: 'red', marginBottom: '10px' }}>\n            {error}\n          </div>\n        )}\n        <button\n          type=\"submit\"\n          disabled={!file || loading}\n          style={{\n            width: '100%',\n            padding: '8px',\n            backgroundColor: file ? '#4444ff' : '#cccccc',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: file ? 'pointer' : 'not-allowed'\n          }}\n        >\n          {loading ? 'Uploading...' : 'Upload CSV'}\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default CSVUploader; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}